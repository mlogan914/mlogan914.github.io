---
title: "Example: Current vs. Future Data Architecture"
excerpt_separator: "<!--more-->"
categories:
  - Data & Platform Engineering
tags:
  - data-engineering
  - systems-thinking
layout: single
classes: wide
---

This example shows how a **Data Clarity Audit** reveals the current data landscape, identifies pain points, and proposes a streamlined, scalable architecture.  

It’s based on a realistic (but fictional) organization — enough complexity to match the real world, but simplified for clarity.

---

# Current-State Architecture

Below is a *“Goldilocks”* current-state diagram: realistic but readable.  
It shows multiple ingestion methods, manual steps, two warehouses, and shadow reporting paths.

```mermaid
flowchart LR
  %% Sources
  subgraph SRC[Sources]
    CRM[(CRM)]
    EHR[(Clinical App)]
    LIMS[(Lab System)]
    Sheets[(Spreadsheets)]
  end

  %% Ingestion / Landing (mixed methods)
  subgraph ING[Ingestion & Landing]
    SFTP[(SFTP Drop)]
    API[[API Pull]]
    Intake[(Landing / S3)]
    NAS[(Shared Drive)]
  end

  %% Processing (split paths)
  subgraph PROC[Processing]
    Legacy[[Legacy ETL]]
    Scripts[[Ad-hoc Scripts]]
  end

  %% Storage (two truths)
  subgraph STORE[Storage]
    OnDW[(On-Prem DW)]
    Cloud[(Cloud DW)]
  end

  %% Serving
  subgraph SERVE[Serving]
    FinMart[(Finance Mart)]
    OpsMart[(Ops Mart)]
  end

  %% Consumption
  subgraph CONS[Consumption]
    BI[[BI Dashboards]]
    XLS[(Excel Reports)]
  end

  %% Flows
  CRM -- nightly --> SFTP --> Intake
  EHR -- API --> API --> Intake
  LIMS -- weekly --> SFTP --> NAS
  Sheets -. ad-hoc .-> NAS

  Intake --> Scripts --> Cloud
  NAS --> Legacy --> OnDW
  Cloud --> OpsMart --> BI
  OnDW --> FinMart --> BI
  OnDW --> XLS

  %% Styling
  classDef manual fill:#f0f0f0,stroke:#888,stroke-dasharray:4 2;
  classDef warn fill:#fff1e6,stroke:#ff9f1c,stroke-width:2px;

  Sheets:::manual
  NAS:::warn
  OnDW:::warn
```
## Key Observations
- Two warehouses (on-prem and cloud) create conflicting “sources of truth.”
- Manual spreadsheet flows bypass governance.
- Legacy ETL and ad-hoc scripts exist in parallel.
- Shadow reporting in Excel increases reconciliation effort.

---

# Future-State Architecture

Here’s the proposed future-state: one ingestion front door, one platform, automated quality checks, and a governed semantic layer.

```mermaid
flowchart LR
  %% Sources
  subgraph SRC[Sources]
    CRM[(CRM)]
    EHR[(Clinical App)]
    LIMS[(Lab System)]
    Sheets[(Spreadsheets)]
  end

  %% Standardized ingestion
  subgraph ING[Ingestion]
    CDC[[CDC / Managed Connectors]]
    Batch[[Scheduled Batch]]
    Bronze[(Landing / Bronze)]
  end

  %% Transform & Store (single platform)
  subgraph CORE[Core Platform]
    DQ{{Automated Data Quality}}
    DBT[[Versioned Transforms]]
    Silver[(Refined / Silver)]
    Gold[(Curated / Gold)]
  end

  %% Serving & Consumption
  subgraph USE[Serving & Use]
    Marts[(Subject Marts)]
    Semantic[[Semantic / Metrics Layer]]
    BI[[BI Dashboards]]
    XLS[(Operational Reports)]
  end

  %% Flows
  CRM --> CDC --> Bronze
  EHR --> CDC --> Bronze
  LIMS --> Batch --> Bronze
  Sheets -. controlled intake .-> Bronze

  Bronze --> DQ --> DBT --> Silver --> DBT --> Gold --> Marts
  Gold --> Semantic --> BI
  Gold --> XLS
```

## Key Improvements
- **One platform** with Bronze → Silver → Gold layers.
- **Automated data quality checks** at the Bronze stage.
- **Versioned transformations** for reproducibility.
- **Controlled spreadsheet intake** (no uncontrolled bypass).
- **Semantic layer** ensures consistent metrics across BI and reports.

---

# Delta Map — What Changed
This “delta” diagram highlights the differences:

- **Red (dashed)** = to retire
- **Green** = to add
- **Blue** = migrate or standardize

```mermaid
flowchart LR
  %% ONE-PAGE DELTA: RED = retire, GREEN = add, BLUE = migrate

  subgraph SRC[Sources]
    CRM[(CRM)]
    EHR[(Clinical App)]
    LIMS[(Lab System)]
    Sheets[(Spreadsheets)]
  end

  %% Old pieces (retire)
  subgraph OLD[Current Pieces]
    NAS[(Shared Drive)]:::retire
    OnDW[(On-Prem DW)]:::retire
    Legacy[[Legacy ETL]]:::retire
    Excel[(Excel Reports)]:::retire
  end

  %% New pieces (target)
  subgraph NEW[Target Platform]
    Bronze[(Landing / Bronze)]:::add
    DQ{{Automated DQ}}:::add
    DBT[[Versioned Transforms]]:::add
    Silver[(Refined / Silver)]:::add
    Gold[(Curated / Gold)]:::add
    Semantic[[Semantic / Metrics Layer]]:::add
    Marts[(Subject Marts)]:::add
    BI[[BI Dashboards]]:::add
  end

  %% Migrations / new front doors
  CDC[[CDC / Managed Connectors]]:::migrate
  Batch[[Scheduled Batch]]:::migrate

  %% Flows: sources -> new intake
  CRM --> CDC --> Bronze
  EHR --> CDC --> Bronze
  LIMS --> Batch --> Bronze
  Sheets -. controlled intake .-> Bronze

  %% Old flows (fading out)
  Sheets -. ad-hoc .-> NAS
  NAS --> Legacy --> OnDW
  OnDW --> Excel

  %% New flows
  Bronze --> DQ --> DBT --> Silver --> DBT --> Gold --> Marts
  Gold --> Semantic --> BI

  %% Styling
  classDef retire fill:#ffeceb,stroke:#e5484d,stroke-dasharray:4 2,stroke-width:2px;
  classDef add fill:#e9f8ef,stroke:#2bb673,stroke-width:2px;
  classDef migrate fill:#e8f1ff,stroke:#3a7afe,stroke-width:2px;
```

## Legend
- **Red (dashed)**: Retire/remove from architecture
- **Green**: Add in the target design
- **Blue**: Migration or standardization step

---

# Before/After Comparison

| Area       | Before                      | After                                    |
| ---------- | --------------------------- | ---------------------------------------- |
| Ingestion  | SFTP + ad-hoc scripts + NAS | CDC/managed connectors into Bronze       |
| Processing | Legacy ETL, unversioned SQL | Versioned transforms (dbt) + tests       |
| Storage    | On-Prem DW + Cloud DW       | Single platform (Bronze → Silver → Gold) |
| Access     | Excel & team marts          | Governed marts + semantic layer          |
| Quality    | Spot checks                 | Automated DQ + monitoring                |

---

# Why This Matters
By moving from a fragmented, manual-heavy architecture to a unified and governed one:

- **Decisions are faster** — less time spent reconciling numbers.
- **Quality improves** — issues are caught earlier in the pipeline.
- **Scalability increases** — the architecture can handle more sources and consumers without breaking.
- **Teams trust the data** — one version of the truth reduces conflict and rework.

> *This example is fictional but reflects real patterns we see in many organizations. In a Data Clarity Audit, your diagrams and recommendations would be tailored to your exact systems, processes, and goals.*